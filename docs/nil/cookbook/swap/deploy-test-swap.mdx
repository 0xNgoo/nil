# Deploy and test the swap contract

This test of the `SwapMatch` contract does the follows:

* Creates two new smart accounts 
* Deploys the contract
* Mints two tokens for these smart accounts
* Places two swap requests (one from Smart account 1 and another from Smart account 2)
* Evaluates whether the swap requests were matched and if excesses were returned correctly

## Create two new smart accounts

```js showLineNumbers file=../../../tests/cookbook-swap.test.mjs start=startTwoNewSmartAccountsDeploy end=endTwoNewSmartAccountsDeploy
```

## Deploy the contract

```js showLineNumbers file=../../../tests/cookbook-swap.test.mjs start=startDeploymentOfSwapMatch end=endDeploymentOfSwapMatch
```

## Mint two new tokens

```js showLineNumbers file=../../../tests/cookbook-swap.test.mjs start=startTokenCreation end=endTokenCreation
```

## Place the first swap request

```js showLineNumbers file=../../../tests/cookbook-swap.test.mjs start=startFirstSendRequest end=endFirstSendRequest
```

## Place the second swap request

```js showLineNumbers file=../../../tests/cookbook-swap.test.mjs start=startSecondSendRequest end=endSecondSendRequest
```

## Check the token amounts

```js showLineNumbers file=../../../tests/cookbook-swap.test.mjs start=startFinalChecks end=endFinalChecks
```

Expected output:

```
Smart account 1 tokens:  {
  TOKEN_ONE_ID: 90000000n,
  TOKEN_TWO_ID: 20000000n
}
Smart account 2 tokens:  {
  TOKEN_ONE_ID: 10000000n,
  TOKEN_TWO_ID: 80000000n
}
```